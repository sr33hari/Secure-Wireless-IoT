# Secure IoT Networks
The Internet of Things (IoT) is an exploding market as well as a important focus area for research. Security is a major issue for IoT products and solutions, with several massive problems that are still commonplace in the field. In this paper, we have successfully minimized the risk of data eavesdropping and tampering over the network by securing these communications using the concept of tunneling. We have implemented this by connecting a router to the internet via a Virtual Private network while using PPTP and L2TP as the underlying protocols for the VPN and exploring their cost benefits, compatibility and most importantly, their feasibility. The main purpose of this project is to try to secure IoT networks without adversely affecting the selling point of IoT. Research paper published on this project can be found at http://dx.doi.org/10.1007/978-981-15-2612-1
# Network Topology
![GitHub Logo](/IoT/topo.png)
In an attempt to implement our VPN based security concepts, we tried to tackle another real life problem around us, that of physical security of the University campus. The system we have implemented is a secure IoT system with wireless sensor networks which serve as a tool for the estate management for remotely checking and controlling infrastructure. The IoT network comprised of NodeMCUs with on chip esp8266 Wi-Fi module and Arduino UNO with external esp8266 Wi-Fi module as the micro controllers. We have used a variety of micro controllers to demonstrate scalability in that respect. Each room has a set of sensors comprising humidity sensor, passive IR motion sensor and temperature sensor. These sensors combined together give a stock of the situation in the classroom and about its occupancy. Each room also has a set of actuators, which include a door lock (electromagnetic or servo based), and AC relays to control the electrical appliances. The sensors log their reading in the server every second along with the state of the actuators, i.e., if the room is locked or not and if the appliances are on or off. The server reports the state of the rooms to user and saves the incoming data in a log file along with a room ID for each room. 
 We tried both Point to Point Tunneling Protocol (PPTP) and Layer 2 Tunneling Protocol (L2TP) as the underlying protocol of the VPN. For PPTP we used the pated tool on Ubuntu machines and for L2TP we user the MacOS Server application which created a L2TP VPN server. The secure router connects to the VPN server and allows secure tunneled communication with the server. We connected another computer to the unsecured router or the internet and used Wireshark to sniff for packets being transmitted through that router. In both tunneling protocols we could not sniff any packets while without the VPN, all packets could be sniffed, which meant we could intercept them and even use ARP spoofing to even mount a MITM attack. Thus the use of tunneling returned positive results.
The server is written in Java and uses swing GUI toolkit and several threads. Each secure router has port forwarding enabled to allow each esp8266 module to have full duplex communication with the central server. The central server has a Hash Table of room IDs mapped to the IP address of the secure router for that room and port numbers for the port forwarding from the router to that room's micro controllers.
# Example Use Case circuit
![GitHub Logo](/IoT/diagram.png)
